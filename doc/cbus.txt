
  Control Bus
  ***********

  The control bus carries a bunch of control lines for controling the various
  modules (DUH). Most of the control lines are shared between the lower and
  higher halves of the CPU, so the modules operating solely on the control bus
  don't have to be duplicated.

  Some control lines require a bit more logic and differ between the lower and
  higher halves, like the carry lines (the lower half carry output serves as
  upper half carry input).


 1) Address line and decoded control lines

  There are 8 address lines on the control bus, 5 source select
  lines (A0...A4) and 3 destination select lines (B0...B2).


  The source address determines what module output to write onto the bus:

    - If the address is 00***, the lower 3 bit select a constant
    - If the address is 010**, the lower 2 bit select an ALU module
    - If the address is 01100, the temp register is selected
    - If the address is 01101, the shift register is selected
    - If the address is 01110, the I/O bus is read from
    - If the address is 01111, the memory is read from
    - If the address is 10***, the lower 3 bit select a register
    - If the address is 11000, the status register is selected


  The destination address is used by the register module as destination
  register address and by the status word for addressing bits or dertmining
  what operation to perform.


  The decoding of the address into the neccessary control lines is done by the
  decode module. The decode module generartes signals for the following
  lines on the control bus:

    BUSOE   - Pulled low to connect the external data bus to the CPU data bus
    BUSDIR  - Pulled high to write to the external data bus, low to read from
              the external data bus
    IORD    - Pulled low to read from I/O bus, connected to the external bus
    MRD     - Pulled low to read from memory, connected to the external bus
    TEMP    - Pulled low to write the temp register onto the bus
    SHIFT   - Pulled low to write the shift register output onto the bus
    ALU0    - Pulled low to write the ALU module 0 output onto the bus
    ALU1    - Pulled low to write the ALU module 1 output onto the bus
    ALU2    - Pulled low to write the ALU module 2 output onto the bus
    ALU3    - Pulled low to write the ALU module 3 output onto the bus



 2) Control lines driven by the control logic

  The following control lines are driven directly by the CPU control logic,
  or one of the front panel switches:

    IOWD  - Pulled low to write to the I/O bus
    MEMW  - Pulled low to write to the memory bus
    AINV  - Pulled high to invert the second adder operand when writing
            to the B register
    REGW  - Pulled high to write to a GP register
    BWR   - Pulled low to write to the B operand
    AWR   - Pulled low to write to the A operand


 3) Carry and shift register ripple lines


    CIN  - Ripple carry input for the adder module.
    SIN  - Ripple MSB input for the shift register.

    COUT - Carry output of the adder module. The bridge module connects the
           lower half COUT to the higher half CIN and uses the higher half
           COUT to drive the PSWCN line.

    SOUT - Ripple output for the shift register. The bridge module connects
           the higher half SOUT to the lower half SIN and uses the lower half
           SOUT to drive the PSWCN line.


 4) Status register related control lines

    NZ    - Pulled low by the bridge module if the current data bus word
            (lower and higher half combined) is zero

    MSB   - Connected by the bridge module to the MSB of the higher
            half data bus

    PSWC  - Connected to the carry flag of the status word

    PSWCN - The new carry flag value generated by the bridge module. Set to
            either total carry out of all adder modules combined or the the
            total shift register output, depending on what module is selected.


